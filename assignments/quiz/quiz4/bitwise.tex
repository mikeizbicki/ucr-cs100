\documentclass{article}

\usepackage[margin=0.5in]{geometry}
\usepackage{listings}
\lstset{numbers=left,frame=single}

\title{Quiz 4 - bitwise operators}
\author{CS100 - software construction}

\begin{document}
\maketitle

\noindent
%Evaluate the following C expressions.  Assume all types are \lstinline{unsigned int}s.
The following code comes from the file \lstinline{fcntl.h}.
\begin{verbatim}
#define O_RDONLY         00
#define O_WRONLY         01
#define O_RDWR           02 /* allows read and write */
#define O_CREAT        0100 /* not fcntl */
#define O_EXCL         0200 /* not fcntl */
#define O_NOCTTY       0400 /* not fcntl */
#define O_TRUNC       01000 /* not fcntl */
#define O_APPEND      02000
#define O_NONBLOCK    04000

int open(const char *pathname, int flags);
\end{verbatim}
Each of the \emph{object style macro}s above define a flag that we can pass to the \lstinline{open} syscall.
These flags modify \lstinline{open}'s behavior.
%For example, \lstinline{O_RD}

\vspace{0.5in}
\noindent
Questions:
\begin{enumerate}
\item
What number do the following expressions evaluate to?

\begin{enumerate}
\item \lstinline{O_RDONLY | O_WRONLY}
\vspace{1.0in}

\item \lstinline{O_APPEND ^ O_CREAT}
\vspace{1.0in}

\item \lstinline{O_RDONLY & O_RDWR}
\vspace{1.0in}

\end{enumerate}
(questions continue on back!)
\newpage
\item
The \lstinline{open} syscall requires that \emph{exactly} one of
\lstinline{O_RDONLY},
\lstinline{O_WRONLY}, or
\lstinline{O_RDWR}
be passed in the \lstinline{flags} parameter.
Write a \emph{function-style macro} that takes an integer and evaluates to \emph{true} exactly in this situation.
You may create helper macros if you want.

\vspace{4in}
\item
Write a \emph{function-style macro} that checks if the flags allow read access.

\end{enumerate}
\end{document}
